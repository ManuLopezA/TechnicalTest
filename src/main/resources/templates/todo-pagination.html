<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>To Do List</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
	<div class="container mt-5">
		<h1>To Do List</h1>


		<form action="/index" method="get" class="mb-4">
			<div class="form-row">
				<div class="col">
					<label for="filterTitle">Filter by Title</label>
					<input type="text" id="filterTitle" name="filterTitle" class="form-control"
						placeholder="Enter title">
				</div>
				<div class="col">
					<label for="filterUsername">Filter by Username</label>
					<input type="text" id="filterUsername" name="filterUsername" class="form-control"
						placeholder="Enter username">
				</div>
				<div class="col">
					<button type="submit" class="btn btn-primary mt-4">Filter</button>
				</div>
			</div>
		</form>

		<div th:if="${toDoPage != null}">
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Title</th>
						<th>Username</th>
						<th>Country</th>
						<th>Completed</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="toDo : ${toDoPage.content}">
						<td th:text="${toDo.title}"></td>
						<td th:text="${toDo.user.userName}"></td>
						<td th:text="${toDo.user.country}"></td>
						<td th:text="${toDo.completed}"></td>
						<td>
							<a th:href="@{/edit-todo(id=${toDo.id})}" class="btn btn-warning">edit</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div th:if="${toDoPage == null || toDoPage.totalElements == 0}">
			<p>No hay tareas pendientes</p>
		</div>

		<div th:if="${toDoPage.totalPages > 0}" class="pagination">
			<span th:each="pageNumber : ${pageNumbers}">
				<a th:href="@{/index(size=${toDoPage.size}, page=${pageNumber}, 
							filterTitle=${filterTitle},filterUsername=${filterUsername})}"
					th:text="${pageNumber}" th:class="${pageNumber == toDoPage.number + 1} ? 'active' : ''"></a>
			</span>
		</div>
	</div>
</body>

</html>